version: '3.8'

services:
  odoo:
    container_name: odoo
    build:
      context: ./dockerfiles
      dockerfile: odoo.dockerfile
    restart: always
    ports:
      - 8888:8069
    env_file:
      - ./env-files/odoo.env
    volumes:
      - ./data/odoo/config:/etc/odoo
      - ./data/odoo/data:/var/lib/odoo
      - ./data/odoo/addons:/mnt/extra-addons
    depends_on:
      - odoo-database
    networks:
      - odoo-network
  odoo-database:
    container_name: odoo-database
    image: postgres:16.2
    restart: always
    ports:
      - 5555:5432
    env_file:
      - ./env-files/postgres.env
    volumes:
      - ./data/postgres:/var/lib/postgresql/data
    networks:
      - odoo-network

networks:
  odoo-network:
